<html>

<head>
  <title>Test Runner</title>
</head>

<body>
  <script type="module">
    import { runTests } from '@web/test-runner-mocha';
    import { expect } from '@esm-bundle/chai';
    import { urlSanitizers } from '../../modules/utils.js';

    runTests(async () => {
      describe('utils#urlSanitizers', () => {
        it('urlSanitizers.full', () => {
          const full = new URL(urlSanitizers.full());
          expect(full.origin).to.be.equal(window.location.origin);
          expect(full.pathname).to.be.equal('/test/it/utils.urlSanitizers.test.html');
          // tests have a search param, so we expect it to be present
          expect(full.search).to.not.be.equal('');
        });

        it('urlSanitizers.origin', () => {
          const origin = urlSanitizers.origin();
          expect(origin).to.be.equal(window.location.origin);
        });

        it('urlSanitizers.path', () => {
          const path = new URL(urlSanitizers.path());
          expect(path.origin).to.be.equal(window.location.origin);
          expect(path.pathname).to.be.equal('/test/it/utils.urlSanitizers.test.html');
          expect(path.search).to.be.equal('');
        });
      });
    });
  </script>
</body>

</html>